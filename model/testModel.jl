## Driver for testing the model. Not run in production.

include("TSPModel.jl")
using TSPModel

dist = Dict()

# cities = [50 200;
#           100 100;
#           100 300;
#           545 50;
#           500 302;
#           550 220;
#           900 220;
#           85  455;
#           300 275;
#           250 150;
#           800 1000;
#           455 95;
#           1500 108;
#           250 950;
#           621 820;
#           351 750]

# n = size(cities)[1]
# # Calculate pairwise distance matrix
# dist[0] = zeros(n, n)
# for i = 1:n
# 	for j = i:n
# 		d = norm(cities[i,1:2] - cities[j,1:2])
# 		dist[0][i,j] = d
# 		dist[0][j,i] = d
# 	end
# end


# dist[1] = [[0,2455,3433,5644,1584,3202,5198,8013,3829],
#      [1891,0,1247,5898,2455,4650,5456,9468,5285],
#      [3056,1441,0,6290,3945,5887,4966,14669,7519],
#      [5415,4986,5943,0,3606,4032,2589,7647,2849],
#      [1808,2640,3425,4495,0,2656,4050,7674,3609],
#      [2839,4398,5617,4666,2702,0,4680,5672,2320],
#      [5506,4923,5252,2864,3698,4587,0,9309,4510],
#      [8086,9645,14248,8282,7949,5247,9641,0,5336],
#      [4476,6086,6546,2696,3893,2220,4530,5374,0]]
# dist[2] = [[0,1107,2969,3571,1396,2887,5305,2358,9023],
#         [1211,0,3042,3797,1931,2657,4691,2607,9555],
#         [3115,3316,0,4937,2357,2114,7514,6048,9457],
#         [4034,3582,5143,0,4282,6068,7189,3465,3911],
#         [1370,1909,1881,3872,0,2081,6108,3630,9603],
#         [2449,2902,1875,5526,2455,0,6464,5017,11683],
#         [5488,4695,7848,7573,6265,6803,0,3704,10565],
#         [2742,2288,4841,4267,2958,4944,3563,0,7983],
#         [9047,10245,9391,4074,9461,11248,11057,10462,0]]

# dist[3] = [[0,6785,8626,5194,3583,6008,10348,3396,5542],
#         [6523,0,6247,1841,3840,5533,8063,4196,2278],
#         [8506,6829,0,5386,5310,2733,2332,8286,5612],
#         [4681,2325,6108,0,2209,4277,7831,3102,1433],
#         [4186,3605,5154,2365,0,2810,6876,3498,2171],
#         [6778,5481,2751,4648,3095,0,4473,6090,4728],
#         [10242,8275,2357,6832,7046,4469,0,10022,6711],
#         [3252,4603,8622,3222,3375,5801,10344,0,4065],
#         [5405,2330,4883,1614,2503,4196,6699,4717,0]]

# dist[4] = [[0,11388,7838,11146,5599,11562,11615,5449,8047],
#            [9416,0,2138,342,6200,5278,1154,4413,2356],
#            [7809,2566,0,2319,5689,5340,3128,2972,693],
#            [10059,844,2201,0,5956,5201,1493,4376,2320],
#            [5373,6549,6215,6306,0,11106,6775,6859,6433],
#            [8640,4841,5009,5526,10547,0,5080,3718,5227],
#            [9979,876,2702,1218,7076,5508,0,4976,2920],
#            [5449,5214,2833,4966,6867,4166,5775,0,2805],
#            [8262,2854,1293,2831,7154,5032,3094,3048,0]]
# dist[5] = [[0,3186,4059,1702,4268,4508,5841,3511,1062],
#            [4213,0,2017,2036,2854,3094,11187,6429,4805],
#            [3832,2510,0,3072,2473,2367,10806,6159,4424],
#            [1937,1565,3294,0,4135,4374,9840,5261,3029],
#            [4296,3818,2720,4363,0,831,10981,4369,5228],
#            [4411,3933,2225,4478,912,0,11248,4266,5002],
#            [5478,11274,11414,9709,10368,10606,0,7193,4655],
#            [3513,6092,5813,5782,4554,4794,7275,0,3880],
#            [1063,4248,4722,3017,4931,5171,4643,3879,0]]           
# dist[6] = [[0,12733,9765,12707,9787,8990,5596,4947,14707],[12158,0,3436,82,4184,10044,8842,10765,1868],[10602,3767,0,3741,7774,7276,8000,7997,5652],[12562,82,3412,0,4217,10449,8769,11170,1901],[10374,4186,7535,4219,0,14070,4677,14791,2318],[5868,10614,7646,10589,14757,0,13119,1422,12588],[5698,9166,9477,9199,4981,12387,0,10716,7297],[4700,12026,9058,12000,16169,1422,9060,0,14000],[14038,1868,5390,1901,2316,11925,6868,12646,0]]
dist[6] = [[0,5687,7191,10786,9848,3979,10764,3049,6640],
           [5440,0,7522,16525,15684,2018,15772,8636,8811],
           [7187,7334,0,6355,5419,6734,6337,9426,1572],
           [11048,15542,6092,0,2014,14941,680,12467,5078],
           [9996,14676,5469,1407,0,14076,1041,11416,4469],
           [4151,1940,6856,15858,11863,0,15106,7131,8046],
           [10912,15856,6385,678,1250,15255,0,12331,4899],
           [2962,8528,10830,12477,11539,6983,12454,0,8345],
           [6182,8610,1572,5330,4393,8010,5308,8477,0]]
# "result":[1,6,2,3,9,4,7,5,8,1]}
# Initialize the model
init()

# Solve, print tour found
for (k,v) in dist
    tic()
    # println(v)
    tour = solve(v)
    println("Instance $k, found a tour: $(TSPModel.tour)")
    toc()
    reset()
end